language: java

jdk:
  - oraclejdk8

sudo: required

services:
  - docker

env:
  - NODE_VERSION=0.12

before_install:
  - nvm install $NODE_VERSION
  - nvm use $NODE_VERSION
  - npm install
  - npm run build

before_script:
  - pip install --user codecov

after_success:
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
  - mvn docker:build -DskipTests=true
  - codecov

branches:
  only:
  - master
